[DiceKeys](../../index.md) / [org.dicekeys.api](../index.md) / [DiceKeysApiClient](./index.md)

# DiceKeysApiClient

`abstract class DiceKeysApiClient`

The API client used to ask the DiceKeys app to generate cryptographic keys seeded by a user's
DiceKey and to perform operations on the application's behalf.

**IMPORTANT**

**To use this API, you must:**

1. Call [create](create.md) to instantiate an API for your activity or fragment, which you can use
to make API calls/
2. Implement *onActivityResult* for your activity or fragment, and pass the
intent you receive to your API object's [handleOnActivityResult](handle-on-activity-result.md) function. This allows the
API to receive responses to API requests, process them, and return them to you.

If you forget the second step, your API calls will never returnâ€”a class of bug first
documented in ([Steiner and Hawes, 1949](https://en.wikipedia.org/wiki/M.T.A._(song))).

### Types

| Name | Summary |
|---|---|
| [Callback](-callback/index.md) | The generic wrapper for all callback classes used to get asynchronous responses. (Kotlin users can avoid using callbacks by using the suspendable APi calls.)`interface Callback<T>` |
| [GenerateSignatureResult](-generate-signature-result/index.md) | `interface GenerateSignatureResult` |
| [OperationNames](-operation-names/index.md) | When an API call is made, an intent is sent with an actual equal to one of these operation names, each of which represents a different API function (operation).`object OperationNames` |
| [ParameterNames](-parameter-names/index.md) | The names used to marshall parameters into bundles for requests and response.`object ParameterNames` |

### Constructors

| Name | Summary |
|---|---|
| [&lt;init&gt;](-init-.md) | The API client used to ask the DiceKeys app to generate cryptographic keys seeded by a user's DiceKey and to perform operations on the application's behalf.`DiceKeysApiClient(callingContext: `[`Context`](https://developer.android.com/reference/android/content/Context.html)`)` |

### Functions

| Name | Summary |
|---|---|
| [generateSignature](generate-signature.md) | Sign a [message](generate-signature.md#org.dicekeys.api.DiceKeysApiClient$generateSignature(kotlin.String, kotlin.ByteArray, org.dicekeys.api.DiceKeysApiClient.Callback((org.dicekeys.api.DiceKeysApiClient.GenerateSignatureResult)))/message) using a public/private signing key pair derived from the user's DiceKey and the [ApiKeyDerivationOptions](../-api-key-derivation-options/index.md) specified in JSON format via [keyDerivationOptionsJson](generate-signature.md#org.dicekeys.api.DiceKeysApiClient$generateSignature(kotlin.String, kotlin.ByteArray, org.dicekeys.api.DiceKeysApiClient.Callback((org.dicekeys.api.DiceKeysApiClient.GenerateSignatureResult)))/keyDerivationOptionsJson).`fun generateSignature(keyDerivationOptionsJson: `[`String`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html)`, message: `[`ByteArray`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-byte-array/index.html)`, callback: Callback<GenerateSignatureResult>? = null): `[`Intent`](https://developer.android.com/reference/android/content/Intent.html)<br>generateSignature (same as above) implemented as a Kotlin suspend function in place of callbacks.`suspend fun generateSignature(keyDerivationOptionsJson: `[`String`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html)`, message: `[`ByteArray`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-byte-array/index.html)`): GenerateSignatureResult` |
| [getPrivateKey](get-private-key.md) | Get a [PrivateKey](../../org.dicekeys.crypto.seeded/-private-key/index.md) derived from the user's DiceKey (the seed) and the key-derivation options specified via [keyDerivationOptionsJson](get-private-key.md#org.dicekeys.api.DiceKeysApiClient$getPrivateKey(kotlin.String, org.dicekeys.api.DiceKeysApiClient.Callback((org.dicekeys.crypto.seeded.PrivateKey)))/keyDerivationOptionsJson), in [Key-Derivation Options JSON Format](https://dicekeys.github.io/seeded-crypto/key_derivation_options_format.html), which must specify `"clientMayRetrieveKey": true`.`fun getPrivateKey(keyDerivationOptionsJson: `[`String`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html)`, callback: Callback<`[`PrivateKey`](../../org.dicekeys.crypto.seeded/-private-key/index.md)`>? = null): `[`Intent`](https://developer.android.com/reference/android/content/Intent.html)<br>getPrivateKey (same as above) implemented as a Kotlin suspend function in place of callbacks.`suspend fun getPrivateKey(keyDerivationOptionsJson: `[`String`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html)`): `[`PrivateKey`](../../org.dicekeys.crypto.seeded/-private-key/index.md) |
| [getPublicKey](get-public-key.md) | Get a [PublicKey](../../org.dicekeys.crypto.seeded/-public-key/index.md) derived from the user's DiceKey and the [ApiKeyDerivationOptions](../-api-key-derivation-options/index.md) specified in [Key-Derivation Options JSON Format](https://dicekeys.github.io/seeded-crypto/key_derivation_options_format.html) as [keyDerivationOptionsJson](get-public-key.md#org.dicekeys.api.DiceKeysApiClient$getPublicKey(kotlin.String, org.dicekeys.api.DiceKeysApiClient.Callback((org.dicekeys.crypto.seeded.PublicKey)))/keyDerivationOptionsJson).`fun getPublicKey(keyDerivationOptionsJson: `[`String`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html)`, callback: Callback<`[`PublicKey`](../../org.dicekeys.crypto.seeded/-public-key/index.md)`>? = null): `[`Intent`](https://developer.android.com/reference/android/content/Intent.html)<br>getPublicKey (same as above) implemented as a Kotlin suspend function in place of callbacks.`suspend fun getPublicKey(keyDerivationOptionsJson: `[`String`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html)`): `[`PublicKey`](../../org.dicekeys.crypto.seeded/-public-key/index.md) |
| [getSecret](get-secret.md) | Derive a pseudo-random cryptographic [Secret](../../org.dicekeys.crypto.seeded/-secret/index.md) from the user's DiceKey and the key-derivation options passed as [keyDerivationOptionsJson](get-secret.md#org.dicekeys.api.DiceKeysApiClient$getSecret(kotlin.String, org.dicekeys.api.DiceKeysApiClient.Callback((org.dicekeys.crypto.seeded.Secret)))/keyDerivationOptionsJson) in [Key-Derivation Options JSON Format](https://dicekeys.github.io/seeded-crypto/key_derivation_options_format.html).`fun getSecret(keyDerivationOptionsJson: `[`String`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html)`, callback: Callback<`[`Secret`](../../org.dicekeys.crypto.seeded/-secret/index.md)`>? = null): `[`Intent`](https://developer.android.com/reference/android/content/Intent.html)<br>getSeed (same as above) implemented as a Kotlin suspend function in place of callbacks.`suspend fun getSecret(keyDerivationOptionsJson: `[`String`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html)`): `[`Secret`](../../org.dicekeys.crypto.seeded/-secret/index.md) |
| [getSignatureVerificationKey](get-signature-verification-key.md) | Get a public [SignatureVerificationKey](../../org.dicekeys.crypto.seeded/-signature-verification-key/index.md) derived from the user's DiceKey and the [ApiKeyDerivationOptions](../-api-key-derivation-options/index.md) specified in JSON format via [keyDerivationOptionsJson](get-signature-verification-key.md#org.dicekeys.api.DiceKeysApiClient$getSignatureVerificationKey(kotlin.String, org.dicekeys.api.DiceKeysApiClient.Callback((org.dicekeys.crypto.seeded.SignatureVerificationKey)))/keyDerivationOptionsJson)`fun getSignatureVerificationKey(keyDerivationOptionsJson: `[`String`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html)`, callback: Callback<`[`SignatureVerificationKey`](../../org.dicekeys.crypto.seeded/-signature-verification-key/index.md)`>? = null): `[`Intent`](https://developer.android.com/reference/android/content/Intent.html)<br>getSignatureVerificationKey (same as above) implemented as a Kotlin suspend function in place of callbacks.`suspend fun getSignatureVerificationKey(keyDerivationOptionsJson: `[`String`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html)`): `[`SignatureVerificationKey`](../../org.dicekeys.crypto.seeded/-signature-verification-key/index.md) |
| [getSigningKey](get-signing-key.md) | Get a [SigningKey](../../org.dicekeys.crypto.seeded/-signing-key/index.md) derived from the user's DiceKey (the seed) and the key-derivation options specified via [keyDerivationOptionsJson](get-signing-key.md#org.dicekeys.api.DiceKeysApiClient$getSigningKey(kotlin.String, org.dicekeys.api.DiceKeysApiClient.Callback((org.dicekeys.crypto.seeded.SigningKey)))/keyDerivationOptionsJson), in [Key-Derivation Options JSON Format](https://dicekeys.github.io/seeded-crypto/key_derivation_options_format.html), which must specify `"clientMayRetrieveKey": true`.`fun getSigningKey(keyDerivationOptionsJson: `[`String`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html)`, callback: Callback<`[`SigningKey`](../../org.dicekeys.crypto.seeded/-signing-key/index.md)`>? = null): `[`Intent`](https://developer.android.com/reference/android/content/Intent.html)<br>getSigningKey (same as above) implemented as a Kotlin suspend function in place of callbacks.`suspend fun getSigningKey(keyDerivationOptionsJson: `[`String`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html)`): `[`SigningKey`](../../org.dicekeys.crypto.seeded/-signing-key/index.md) |
| [getSymmetricKey](get-symmetric-key.md) | Get a [SymmetricKey](../../org.dicekeys.crypto.seeded/-symmetric-key/index.md) derived from the user's DiceKey (the seed) and the key-derivation options specified via [keyDerivationOptionsJson](get-symmetric-key.md#org.dicekeys.api.DiceKeysApiClient$getSymmetricKey(kotlin.String, org.dicekeys.api.DiceKeysApiClient.Callback((org.dicekeys.crypto.seeded.SymmetricKey)))/keyDerivationOptionsJson), in [Key-Derivation Options JSON Format](https://dicekeys.github.io/seeded-crypto/key_derivation_options_format.html), which must specify `"clientMayRetrieveKey": true`.`fun getSymmetricKey(keyDerivationOptionsJson: `[`String`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html)`, callback: Callback<`[`SymmetricKey`](../../org.dicekeys.crypto.seeded/-symmetric-key/index.md)`>? = null): `[`Intent`](https://developer.android.com/reference/android/content/Intent.html)<br>getSymmetricKey (same as above) implemented as a Kotlin suspend function in place of callbacks.`suspend fun getSymmetricKey(keyDerivationOptionsJson: `[`String`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html)`): `[`SymmetricKey`](../../org.dicekeys.crypto.seeded/-symmetric-key/index.md) |
| [handleOnActivityResult](handle-on-activity-result.md) | Activities and Fragments that use this API should implement onActivityResult and and call handleOnActivityResult with the data/intent (third parameter) received. Doing so allows this class to process results returned to the activity/fragment and then call the appropriate callback functions when an API call has either succeeded or failed.`fun handleOnActivityResult(resultIntent: `[`Intent`](https://developer.android.com/reference/android/content/Intent.html)`?): `[`Unit`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html) |
| [requireResult](require-result.md) | `fun <T> requireResult(t: T?): T` |
| [sealWithSymmetricKey](seal-with-symmetric-key.md) | Seal (encrypt with a message-authentication code) a message ([plaintext](seal-with-symmetric-key.md#org.dicekeys.api.DiceKeysApiClient$sealWithSymmetricKey(kotlin.String, kotlin.ByteArray, kotlin.String, org.dicekeys.api.DiceKeysApiClient.Callback((org.dicekeys.crypto.seeded.PackagedSealedMessage)))/plaintext)) with a symmetric key derived from the user's DiceKey, the [keyDerivationOptionsJson](seal-with-symmetric-key.md#org.dicekeys.api.DiceKeysApiClient$sealWithSymmetricKey(kotlin.String, kotlin.ByteArray, kotlin.String, org.dicekeys.api.DiceKeysApiClient.Callback((org.dicekeys.crypto.seeded.PackagedSealedMessage)))/keyDerivationOptionsJson) in [Key-Derivation Options JSON Format](https://dicekeys.github.io/seeded-crypto/key_derivation_options_format.html), and [PostDecryptionInstructions](../-post-decryption-instructions/index.md) specified via a JSON string as [postDecryptionInstructions](seal-with-symmetric-key.md#org.dicekeys.api.DiceKeysApiClient$sealWithSymmetricKey(kotlin.String, kotlin.ByteArray, kotlin.String, org.dicekeys.api.DiceKeysApiClient.Callback((org.dicekeys.crypto.seeded.PackagedSealedMessage)))/postDecryptionInstructions) in the in [Post-Decryption Instructions JSON Format](https://dicekeys.github.io/seeded-crypto/post_decryption_instructions_format.html).`fun sealWithSymmetricKey(keyDerivationOptionsJson: `[`String`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html)`, plaintext: `[`ByteArray`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-byte-array/index.html)`, postDecryptionInstructions: `[`String`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html)` = "", callback: Callback<`[`PackagedSealedMessage`](../../org.dicekeys.crypto.seeded/-packaged-sealed-message/index.md)`>): `[`Intent`](https://developer.android.com/reference/android/content/Intent.html)<br>Seal (same as above) implemented as a Kotlin suspend function in place of callbacks.`suspend fun sealWithSymmetricKey(keyDerivationOptionsJson: `[`String`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html)`, plaintext: `[`ByteArray`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-byte-array/index.html)`, postDecryptionInstructions: `[`String`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html)` = ""): `[`PackagedSealedMessage`](../../org.dicekeys.crypto.seeded/-packaged-sealed-message/index.md) |
| [unsealWithPrivateKey](unseal-with-private-key.md) | Unseal (decrypt &amp; authenticate) a message that was previously sealed with a [PublicKey](../../org.dicekeys.crypto.seeded/-public-key/index.md) to construct a [PackagedSealedMessage](../../org.dicekeys.crypto.seeded/-packaged-sealed-message/index.md). The public/private key pair will be re-derived from the user's seed (DiceKey) and the key-derivation options packaged with the message.  It will also ensure that the post-decryption instructions have not changed since the message was packaged.`fun unsealWithPrivateKey(packagedSealedMessage: `[`PackagedSealedMessage`](../../org.dicekeys.crypto.seeded/-packaged-sealed-message/index.md)`, callback: Callback<`[`ByteArray`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-byte-array/index.html)`>? = null): `[`Intent`](https://developer.android.com/reference/android/content/Intent.html)<br>unsealWithPrivateKey (same as above) implemented as a Kotlin suspend function in place of callbacks.`suspend fun unsealWithPrivateKey(packagedSealedMessage: `[`PackagedSealedMessage`](../../org.dicekeys.crypto.seeded/-packaged-sealed-message/index.md)`): `[`ByteArray`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-byte-array/index.html) |
| [unsealWithSymmetricKey](unseal-with-symmetric-key.md) | Unseal (decrypt &amp; authenticate) a [packagedSealedMessage](unseal-with-symmetric-key.md#org.dicekeys.api.DiceKeysApiClient$unsealWithSymmetricKey(org.dicekeys.crypto.seeded.PackagedSealedMessage, org.dicekeys.api.DiceKeysApiClient.Callback((kotlin.ByteArray)))/packagedSealedMessage) that was previously sealed with a symmetric key derived from the user's DiceKey, the [ApiKeyDerivationOptions](../-api-key-derivation-options/index.md) specified in JSON format via [PackagedSealedMessage.keyDerivationOptionsJson](../../org.dicekeys.crypto.seeded/-packaged-sealed-message/key-derivation-options-json.md), and any [PostDecryptionInstructions](../-post-decryption-instructions/index.md) optionally specified by [PackagedSealedMessage.postDecryptionInstructions](../../org.dicekeys.crypto.seeded/-packaged-sealed-message/post-decryption-instructions.md) in [Post-Decryption Instructions JSON Format](https://dicekeys.github.io/seeded-crypto/post_decryption_instructions_format.html).`fun unsealWithSymmetricKey(packagedSealedMessage: `[`PackagedSealedMessage`](../../org.dicekeys.crypto.seeded/-packaged-sealed-message/index.md)`, callback: Callback<`[`ByteArray`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-byte-array/index.html)`>? = null): `[`Intent`](https://developer.android.com/reference/android/content/Intent.html)<br>unsealWithSymmetricKey (same as above) implemented as a Kotlin suspend function in place of callbacks.`suspend fun unsealWithSymmetricKey(packagedSealedMessage: `[`PackagedSealedMessage`](../../org.dicekeys.crypto.seeded/-packaged-sealed-message/index.md)`): `[`ByteArray`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-byte-array/index.html) |

### Companion Object Functions

| Name | Summary |
|---|---|
| [create](create.md) | Instantiate an API client for a use within a [Activity](https://developer.android.com/reference/android/app/Activity.html).`fun create(activity: `[`Activity`](https://developer.android.com/reference/android/app/Activity.html)`): `[`DiceKeysApiClient`](./index.md)<br>Instantiate an API client for a use within a [Fragment](https://developer.android.com/reference/androidx/androidx/fragment/app/Fragment.html).`fun create(fragment: `[`Fragment`](https://developer.android.com/reference/androidx/androidx/fragment/app/Fragment.html)`): `[`DiceKeysApiClient`](./index.md) |
