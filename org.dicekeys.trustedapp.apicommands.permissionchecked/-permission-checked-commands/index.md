[DiceKeys](../../index.md) / [org.dicekeys.trustedapp.apicommands.permissionchecked](../index.md) / [PermissionCheckedCommands](./index.md)

# PermissionCheckedCommands

`class PermissionCheckedCommands : `[`PermissionChecksAndHiddenSeeds`](../-permission-checks-and-hidden-seeds/index.md)

Implements the server-side API calls and the necessary permission checks,
using a structure that's locally testable
(all intent marshalling and unmarshalling occurs outside this library.)

Internally, this class does not have access to the keySqr.
The only way it can get seeds is by calling the [PermissionChecksAndHiddenSeeds](../-permission-checks-and-hidden-seeds/index.md)
to get the seeds through the reference monitor.

Internally, all API calls only use seeds to create key or [Secret](../../org.dicekeys.crypto.seeded/-secret/index.md) objects,
and keys are generated by one of the following two functions which centralize
security checks:
[getSeedOrThrowIfClientNotAuthorized](#), which throws an exception if the client
application is not authorized to use the key or [Secret](../../org.dicekeys.crypto.seeded/-secret/index.md) being derived, and
for calls to [getPrivateKey](get-private-key.md), [getSigningKey](get-signing-key.md), and [getSymmetricKey](get-symmetric-key.md) the
[getSeedOrThrowIfClientsMayNotRetrieveKeysOrThisClientNotAuthorized](#)
method checks that the `clientMayRetrieveKey` key-derivation option is set to true.

The caller is responsible for catching exceptions

### Constructors

| Name | Summary |
|---|---|
| [&lt;init&gt;](-init-.md) | Implements the server-side API calls and the necessary permission checks, using a structure that's locally testable (all intent marshalling and unmarshalling occurs outside this library.)`PermissionCheckedCommands(keySqr: `[`KeySqr`](../../org.dicekeys.keysqr/-key-sqr/index.md)`<`[`Face`](../../org.dicekeys.keysqr/-face/index.md)`>, clientsApplicationId: `[`String`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html)`, askUserForApprovalOrReturnResultIfReady: (message: `[`String`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html)`) -> `[`Boolean`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-boolean/index.html)`?)` |

### Functions

| Name | Summary |
|---|---|
| [generateSignature](generate-signature.md) | Implement [DiceKeysApiClient.generateSignature](../../org.dicekeys.api/-dice-keys-api-client/generate-signature.md) with the necessary permissions checks`fun generateSignature(keyDerivationOptionsJson: `[`String`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html)`, message: `[`ByteArray`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-byte-array/index.html)`): `[`Pair`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-pair/index.html)`<`[`ByteArray`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-byte-array/index.html)`, `[`SignatureVerificationKey`](../../org.dicekeys.crypto.seeded/-signature-verification-key/index.md)`>` |
| [getPrivateKey](get-private-key.md) | Implement [DiceKeysApiClient.getPrivateKey](../../org.dicekeys.api/-dice-keys-api-client/get-private-key.md) with the necessary permissions checks`fun getPrivateKey(keyDerivationOptionsJson: `[`String`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html)`): `[`PrivateKey`](../../org.dicekeys.crypto.seeded/-private-key/index.md) |
| [getPublicKey](get-public-key.md) | Implement [DiceKeysApiClient.getPublicKey](../../org.dicekeys.api/-dice-keys-api-client/get-public-key.md) with the necessary permissions checks`fun getPublicKey(keyDerivationOptionsJson: `[`String`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html)`): `[`PublicKey`](../../org.dicekeys.crypto.seeded/-public-key/index.md) |
| [getSecret](get-secret.md) | Implement [DiceKeysApiClient.getSecret](../../org.dicekeys.api/-dice-keys-api-client/get-secret.md) with the necessary permissions checks`fun getSecret(keyDerivationOptionsJson: `[`String`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html)`): `[`Secret`](../../org.dicekeys.crypto.seeded/-secret/index.md) |
| [getSignatureVerificationKey](get-signature-verification-key.md) | Implement [DiceKeysApiClient.getSignatureVerificationKey](../../org.dicekeys.api/-dice-keys-api-client/get-signature-verification-key.md) with the necessary permissions checks`fun getSignatureVerificationKey(keyDerivationOptionsJson: `[`String`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html)`): `[`SignatureVerificationKey`](../../org.dicekeys.crypto.seeded/-signature-verification-key/index.md) |
| [getSigningKey](get-signing-key.md) | Implement [DiceKeysApiClient.getSigningKey](../../org.dicekeys.api/-dice-keys-api-client/get-signing-key.md) with the necessary permissions checks`fun getSigningKey(keyDerivationOptionsJson: `[`String`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html)`): `[`SigningKey`](../../org.dicekeys.crypto.seeded/-signing-key/index.md) |
| [getSymmetricKey](get-symmetric-key.md) | Implement [DiceKeysApiClient.getSymmetricKey](../../org.dicekeys.api/-dice-keys-api-client/get-symmetric-key.md) with the necessary permissions checks`fun getSymmetricKey(keyDerivationOptionsJson: `[`String`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html)`): `[`SymmetricKey`](../../org.dicekeys.crypto.seeded/-symmetric-key/index.md) |
| [sealWithSymmetricKey](seal-with-symmetric-key.md) | Implement [DiceKeysApiClient.sealWithSymmetricKey](../../org.dicekeys.api/-dice-keys-api-client/seal-with-symmetric-key.md) with the necessary permissions checks`fun sealWithSymmetricKey(keyDerivationOptionsJson: `[`String`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html)`, plaintext: `[`ByteArray`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-byte-array/index.html)`, postDecryptionInstructions: `[`String`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html)`?): `[`PackagedSealedMessage`](../../org.dicekeys.crypto.seeded/-packaged-sealed-message/index.md) |
| [unsealWithPrivateKey](unseal-with-private-key.md) | Implement [DiceKeysApiClient.unsealWithPrivateKey](../../org.dicekeys.api/-dice-keys-api-client/unseal-with-private-key.md) with the necessary permissions checks`fun unsealWithPrivateKey(packagedSealedMessage: `[`PackagedSealedMessage`](../../org.dicekeys.crypto.seeded/-packaged-sealed-message/index.md)`): `[`ByteArray`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-byte-array/index.html)`?` |
| [unsealWithSymmetricKey](unseal-with-symmetric-key.md) | Implement [DiceKeysApiClient.unsealWithSymmetricKey](../../org.dicekeys.api/-dice-keys-api-client/unseal-with-symmetric-key.md) with the necessary permissions checks`fun unsealWithSymmetricKey(packagedSealedMessage: `[`PackagedSealedMessage`](../../org.dicekeys.crypto.seeded/-packaged-sealed-message/index.md)`): `[`ByteArray`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-byte-array/index.html)`?` |
