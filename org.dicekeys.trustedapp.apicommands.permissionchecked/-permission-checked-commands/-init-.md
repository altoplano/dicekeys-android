[DiceKeys](../../index.md) / [org.dicekeys.trustedapp.apicommands.permissionchecked](../index.md) / [PermissionCheckedCommands](index.md) / [&lt;init&gt;](./-init-.md)

# &lt;init&gt;

`PermissionCheckedCommands(keySqr: `[`KeySqr`](../../org.dicekeys.keysqr/-key-sqr/index.md)`<`[`Face`](../../org.dicekeys.keysqr/-face/index.md)`>, clientsApplicationId: `[`String`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html)`, askUserForApprovalOrReturnResultIfReady: (message: `[`String`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html)`) -> `[`Boolean`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-boolean/index.html)`?)`

Implements the server-side API calls and the necessary permission checks,
using a structure that's locally testable
(all intent marshalling and unmarshalling occurs outside this library.)

Internally, this class does not have access to the keySqr.
The only way it can get seeds is by calling the [PermissionChecksAndHiddenSeeds](../-permission-checks-and-hidden-seeds/index.md)
to get the seeds through the reference monitor.

Internally, all API calls only use seeds to create key or [Secret](../../org.dicekeys.crypto.seeded/-secret/index.md) objects,
and keys are generated by one of the following two functions which centralize
security checks:
[getSeedOrThrowIfClientNotAuthorized](#), which throws an exception if the client
application is not authorized to use the key or [Secret](../../org.dicekeys.crypto.seeded/-secret/index.md) being derived, and
for calls to [getPrivateKey](get-private-key.md), [getSigningKey](get-signing-key.md), and [getSymmetricKey](get-symmetric-key.md) the
[getSeedOrThrowIfClientsMayNotRetrieveKeysOrThisClientNotAuthorized](#)
method checks that the `clientMayRetrieveKey` key-derivation option is set to true.

The caller is responsible for catching exceptions

